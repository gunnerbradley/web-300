<!-- 
Title: bradley-bobs-auto-repair.html 
Author: Gunner Bradley
Date: 09/04/21
Description: Calorie count search app
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEB 330 – Enterprise JavaScript II”</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="../theme.css">
    <link rel="stylesheet" href="../site.css">
    <link rel="stylesheet" href="./bradley-bobs-auto-repair.css">
</head>
<body class="light-theme wrapper">
    <h1 class="app-header">Welcome to Bob’s Automotive Repair Shop!</h1>
    <div class="card">
        <p class="card-title">Product Listing</p>
        <cart-component></cart-component>
        <form>
            <label for="productList">Choose a Product:</label>
            <select id="productList" class="drop-down-menu">
                <option value="Select">--Select--</option>
                <option value="19.99">Oil Change</option>
                <option value="18.44">Filter Replacement</option>
                <option value="9.99">Wiper Fluid Refill</option>
            </select>
             <br>
            <i id="cart-message">To view your shopping cart click on the icon.</i>
            <br>
            <br>
            <button type="button" class="btn btn-primary" id="btnAddProduct">Add to cart</button>
        </form>
        
    </div>
   <a href="../index.html" class="return-home text-styles">Return</a>
    <div class="card">
        <p class="card-title">Shopping Cart</p>
        <div class="card-content">
            <table id="shoppingCart"></table>
        </div>
    </div>
 

   
    <script src="../theme.js"></script>
    <script type="module">
        import { Product } from './product.js';
        import { ShoppingCart } from './shopping-cart.js';
        import { CartComponent } from './cart-component.js';
        
        let shoppingCart = new ShoppingCart();
        document.getElementById("cart-count").innerHTML = "0";

        document.getElementById("btnAddProduct").onclick = () => {
            let productList = document.getElementById('productList');
            let product = productList.options[productList.selectedIndex].text;
            let productValue = productList.options[productList.selectedIndex].value;

            if (productValue != "Select") {
                shoppingCart.add(new Product(product, productValue));
                document.getElementById("cart-count").innerHTML = shoppingCart.count();
               
                alert(`${product} was added to your cart!`)
            }
        }
      
        document.getElementById("cartIcon").onclick = () => {

            let cartDisplayTable = `
            <thead>
                <th>ID</th>
                <th>Name></th>
                <th>Price</th>
            </thead>`;

            let tableData =``;
            for (let product of shoppingCart.products) {
                tableData += `
                    <tr>
                        <td>${product.id}</td>
                        <td>${product.name}</td>
                        <td>${product.price}</td>
                    </tr>`
                
                document.getElementById("shoppingCart").innerHTML = cartDisplayTable + tableData;
            }
        }

    </script>
</body>
</html>